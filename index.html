<!DOCTYPE html>
<html lang="vn">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üéµüéµMain Page MUSICFESüéµüéµ</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
</head>

<body>
    <!-- l√†m theo m·∫´u -->
    <!-- <div> -->
    <!-- <span>B√†i h√°t</span> -->
    <!-- <span>ƒê∆∞·ª£c s√°ng t√°c b·ªüi</span> -->
    <!-- </div> -->
    <div class="navbar-main">
        <h1
            style="text-align: center; border-bottom: 5px solid rgb(13, 93, 205); font-size: 75px; margin: 0; color: rgb(0, 102, 255);">
            üé∂üé∂MUSICFESüé∂üé∂</h1>
        <div class="navbar-part">
            <a href="About.html" class="navbar"><b>About</b></a>
            <a href="Favorite.html" class="navbar"><b>Favorite</b></a>
            <a href="Music.html" class="navbar"><b>Music</b></a>
            <a href="login.html" class="navbar"><b>Login</b></a>
            <a href="register.html" class="navbar"><b>Register</b></a>
            <a href="genres.html" class="navbar"><b>Genres</b></a>
        </div>
    </div>
    <div class="slideshow-container">

        <div class="mySlides fade">
          <div class="numbertext">1 / 3</div>
          <img src="https://moewalls.com/wp-content/uploads/2022/08/arona-underwater-classroom-blue-archive-thumb.jpg" style="width:1000px ; height:600px">
          <div class="text">T·∫≠n h∆∞·ªüng c√°c b√†i nh·∫°c<br>m√† b·∫°n y√™u th√≠ch ngay h√¥m nay</div>
        </div>
        
        <div class="mySlides fade">
          <div class="numbertext">2 / 3</div>
          <img src="https://ticketgo.vn/photos/70/hinhanh-tintuc/5d30234788c47.jpg" style="width:1000px ; height:600px">
          <div class="text">L·∫Øng nghe b√†i h√°t c·ªßa ca sƒ© m√† b·∫°n y√™u th√≠ch</div>
        </div>
        
        <div class="mySlides fade">
          <div class="numbertext">3 / 3</div>
          <img src="https://i0.wp.com/hellovpop.com/wp-content/uploads/2019/07/son-tung-2.jpg?fit=1500%2C1000&ssl=1" style="width:1000px ; height:600px">
          <div class="text">Ch√∫ng t√¥i s·∫Ω c·ªë g·∫Øng h·∫øt s·ª©c ho√†n thi·ªán website t·ªët h∆°n</div>
        </div>
        
        <a class="prev" onclick="plusSlides(-1)">‚ùÆ</a>
        <a class="next" onclick="plusSlides(1)">‚ùØ</a>
        
        </div>
        <br>
        
        <div style="text-align:center">
          <span class="dot" onclick="currentSlide(1)"></span> 
          <span class="dot" onclick="currentSlide(2)"></span> 
          <span class="dot" onclick="currentSlide(3)"></span> 
        </div>


        <!-- khu v·ª±c n√†y chia ra -->
    <div class="Article-Text">
       <h1>üé∂üé∂Ch√†o m·ª´ng ƒë·∫øn v·ªõi MUSICFESüé∂üé∂</h1>
       <h2 style="text-decoration: underline; margin-left: 25px;">Top 10 B√†i h√°t ƒë∆∞·ª£c y√™u th√≠ch nh·∫•t</h2>
    </div> 
    <!-- Nh·∫°c Y√™u th√≠ch -->
    <div class="Tet-song">
        <div class="playlist-container row" id="playlistContainer">
            <!-- <div class="track-card">
                <img src="https://avatar-ex-swe.nixcdn.com/song/2024/02/28/e/3/6/9/1709132786763_640.jpg"
                    alt="${track.name}">
                <div class="details">
                    <h2>Pho real</h2>
                    <p>Low G, Anh Phan, bbno$</p>
                    <button class="favorite-button">‚ù§</button>
                </div>
                <iframe src="https://open.spotify.com/embed/track/0OIed6UFpfT2nW4BffD7Js"
                    allow="encrypted-media"></iframe>
            </div> -->
        </div>
        <!-- T√ÇM ƒêI·ªÇM CH√ö √ù -->
        <div>
            <h2 class="Article-Text" style="padding: 20px; margin: 0; text-decoration: underline; font-size: 36px; font-weight: bolder; ">ƒê√¢y l√† top 3 b√†i h√°t ƒë∆∞·ª£c ƒë√°nh gi√° hay nh·∫•t nƒÉm 2024</h2>
            <div class="scoreboard-row">
                <div class="track-card">
                    <img src="https://avatar-ex-swe.nixcdn.com/song/2024/02/28/e/3/6/9/1709132786763_640.jpg"
                        alt="${track.name}">
                    <div class="details">
                        <h2>Pho real</h2>
                        <p>Low G, Anh Phan, bbno$</p>
                        <button class="favorite-button">‚ù§</button>
                    </div>
                    <iframe src="https://open.spotify.com/embed/track/0OIed6UFpfT2nW4BffD7Js"
                        allow="encrypted-media"></iframe>
                </div>
                <div class="track-card">
                    <img src="https://i.scdn.co/image/ab67616d00001e0206a4d1fd269dc47911d37eb3"
                        alt="${track.name}">
                    <div class="details">
                        <h2>√Çm th·∫ßm b√™n em</h2>
                        <p>S∆°n t√πng MTP</p>
                        <button class="favorite-button">‚ù§</button>
                    </div>
                    <iframe src="https://open.spotify.com/track/0tWqngfOXKN1xOlYK4WwVw"
                        allow="encrypted-media"></iframe>
                </div>
                <div class="track-card">
                    <img src="https://i.scdn.co/image/ab67616d0000b273a621606cf248157581a03cbc"
                        alt="${track.name}">
                    <div class="details">
                        <h2>Blue Archive OST 59</h2>
                        <p>Yoko</p>
                        <button class="favorite-button">‚ù§</button>
                    </div>
                    <iframe src="https://open.spotify.com/track/3QRdzUlyC6Ae5ZL10zpBvY"
                        allow="encrypted-media"></iframe>
                </div>
            </div>
        </div>
        <div class="Article-Text">
            <h2>N·∫øu b·∫°n mu·ªën th∆∞·ªüng th·ª©c th√™m c√°c b√†i h√°t kh√°c c√≥ tr√™n website h√£y nh·∫•n v√†o ƒë√¢y ƒë·ªÉ chuy·ªÉn sang trang Music:<br>
                <div><a href="Music.html"
                    style="text-decoration: none;">Xem th√™m<span
                        class="material-symbols-outlined">chevron_right</span></a></h2></div>
        </div>
        <!-- TEXT -->

        <!-- Footer -->
        <div class="Footer">
            <ol>
                <div>
                    <li class="footer-part">Website ƒë∆∞·ª£c x√¢y d·ª±ng b·ªüi:</li>
                    <ul>
                        <li><a>Phan Nh·∫≠t H∆∞ng</a></li>
                        <li><a>Mindx</a></li>
                        <li><a>W3school</a></li>
                        <li><a>Nguy·ªÖn B√¨nh Minh</a></li>
                    </ul>
                </div>
                <div>
                    <li class="footer-part">C·ªông ƒë·ªìng:</li>
                    <ul>
                        <li>Facebook</li>
                        <li>Youtube</li>
                        <li>Twitter(X)</li>
                        <li>Instagram</li>
                    </ul>
                </div>
                <div>
                    <li class="footer-part">H·ªó tr·ª£ ng∆∞·ªùi d√πng:</li>
                    <ul>
                        <li>N√≥i chuy·ªán v·ªõi nh√† ph√°t tri·ªÉn</li>
                        <li>H∆∞·ªõng d·∫´n c√°ch s·ª≠ d·ª•ng webiste</li>
                        <li>X·ª≠ l√≠ l·ªói , bug</li>
                        <li>T∆∞ v·∫•n ng∆∞·ªùi d√πng</li>
                    </ul>
                </div>
            </ol>
        </div>
</body>
<script src="spotify.js"></script>
<script>
    const clientId = "b8eccf8d76144ef3963252498eddc4a9";
    const clientSecret = "5a0b15cf15f64956bd8aadd357c331a5";

    const tokenUrl = 'https://accounts.spotify.com/api/token';
    const encodedCredentials = btoa(`${clientId}:${clientSecret}`);
    const body = 'grant_type=client_credentials';

    fetch(tokenUrl, {
        method: 'POST',
        headers: {
            'Content-Type': 'application/x-www-form-urlencoded',
            'Authorization': `Basic ${encodedCredentials}`
        },
        body: body
    })
        .then(response => response.json())
        .then(data => {
            if (data.access_token) {
                fetchPlaylistDetails(data.access_token);
            } else {
                alert('Failed to get access token');
            }
        })
        .catch(error => console.error('Error fetching access token:', error));


    function fetchPlaylistDetails(token) {
        const playlistId = '7qhlNDge94s4EOEafJz6g0'; // Example playlist ID //3jQYYDZ7XrDNmWyKwfJrP4

        fetch(`https://api.spotify.com/v1/playlists/${playlistId}`, {
            headers: {
                'Authorization': `Bearer ${token}`
            }
        })
            .then(response => response.json())
            .then(data => {
                const playlistContainer = document.getElementById('playlistContainer');
                playlistContainer.innerHTML = ''; // Clear previous content

                data.tracks.items.forEach(item => {
                    const track = item.track;
                    const isFavorited = localStorage.getItem(track.id) === 'true';
                    const favoriteIcon = isFavorited ? '‚ù§Ô∏è' : 'ü§ç';
                    const trackCardHTML = `
                        <div class="track-card">
                            <img src="${track.album.images[0].url}" alt="${track.name}">
                            <div class="details">
                                <h2>${track.name}</h2>
                                <p>${track.artists.map(artist => artist.name).join(', ')}</p>
                                <button class="favorite-button ${isFavorited ? 'favorited' : ''}" data-track-id="${track.id}">${favoriteIcon}</button>
                            </div>
                            <iframe src="https://open.spotify.com/embed/track/${track.id}" allow="encrypted-media"></iframe>
                        </div>
                    `;
                    playlistContainer.innerHTML += trackCardHTML;
                });
                const favoriteButtons = document.querySelectorAll('.favorite-button');
                favoriteButtons.forEach(button => {
                    button.addEventListener('click', function () {
                        const trackId = button.getAttribute('data-track-id');
                        const isFavorited = button.classList.contains('favorited');
                        const trackName = button.parentElement.querySelector('h2').textContent;
                        const imageName = button.parentElement.parentElement.querySelector('img').src;
                        const artist = button.parentElement.parentElement.querySelector("p").textContent;
                        // 
                        if (isFavorited) {
                            localStorage.removeItem(trackId);
                        } else {
                            localStorage.setItem(trackId, JSON.stringify({ trackName, imageName , artist}));
                        }

                        button.classList.toggle('favorited');
                        button.textContent = isFavorited ? 'ü§ç' : '‚ù§Ô∏è';
                    });
                });
            })
            .catch(error => console.error('Error fetching playlist details:', error));
    }
//    New page
    let slideIndex = 1;
showSlides(slideIndex);

function plusSlides(n) {
  showSlides(slideIndex += n);
}

function currentSlide(n) {
  showSlides(slideIndex = n);
}

function showSlides(n) {
  let i;
  let slides = document.getElementsByClassName("mySlides");
  let dots = document.getElementsByClassName("dot");
  if (n > slides.length) {slideIndex = 1}    
  if (n < 1) {slideIndex = slides.length}
  for (i = 0; i < slides.length; i++) {
    slides[i].style.display = "none";  
  }
  for (i = 0; i < dots.length; i++) {
    dots[i].className = dots[i].className.replace(" active", "");
  }
  slides[slideIndex-1].style.display = "block";  
  dots[slideIndex-1].className += " active";
}

// let slideIndex = 0;
// showSlides();

// function showSlides() {
//   let i;
//   let slides = document.getElementsByClassName("mySlides");
//   for (i = 0; i < slides.length; i++) {
//     slides[i].style.display = "none";
//   }
//   slideIndex++;
//   if (slideIndex > slides.length) {slideIndex = 1}
//   slides[slideIndex-1].style.display = "block";
//   setTimeout(showSlides, 10000); // Change image every 2 seconds
// }
</script>

</html>